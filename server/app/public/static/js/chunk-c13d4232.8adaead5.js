(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c13d4232"],{1715:function(t,s,o){"use strict";var a=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"icon",on:{click:t.back}},[o("van-icon",{staticClass:"arrow",attrs:{name:"arrow-left"}})],1)},e=[],i={methods:{back(){this.$emit("back")}}},n=i,c=(o("878e"),o("25c1")),l=Object(c["a"])(n,a,e,!1,null,"1280abbf",null);l.options.__file="Back.vue";s["a"]=l.exports},"45b1":function(t,s,o){},5307:function(t,s,o){t.exports=o.p+"img/vue.63050d8a.jpg"},"6e66":function(t,s,o){},"878e":function(t,s,o){"use strict";var a=o("6e66"),e=o.n(a);e.a},"9f52":function(t,s,o){"use strict";o.r(s);var a=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"goods"},[o("Scroll",{ref:"scroll",staticClass:"scroll",attrs:{bounce:t.bounce,pullup:!0},on:{scrollToEnd:t.scrollToEnd}},[o("div",[o("van-swipe",{staticClass:"goods-swipe",attrs:{autoplay:3e3,touchable:!1},on:{change:t.onChange}},[o("van-swipe-item",[o("img",{ref:"swiperImg",attrs:{src:t.goods.image,onerror:t.defaultImg},on:{click:t.showImagePreview}})]),o("van-swipe-item",[o("img",{ref:"swiperImg2",attrs:{src:t.goods.image,onerror:t.defaultImg},on:{click:t.showImagePreview}})]),o("div",{staticClass:"custom-indicator",attrs:{slot:"indicator"},slot:"indicator"},[t._v(t._s(t.current+1)+"/2")])],1),o("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFlag,expression:"!showFlag"}]},[o("van-cell-group",[o("van-cell",[o("div",{staticClass:"goods-title"},[t._v(t._s(t.goods.name))]),o("div",{staticClass:"goods-price"},[t._v("￥"+t._s(t.goods.present_price))])]),o("van-cell",{staticClass:"goods-express"},[o("van-col",{attrs:{span:"9"}},[t._v("运费："+t._s(t.goods.express||0))]),o("van-col",{attrs:{span:"9"}},[t._v("剩余："+t._s(t.goods.amount))]),o("van-col",{staticClass:"like",attrs:{span:"6"}},[t._v("\n                            "+t._s(t.isCollectionFlag?"收藏":"取消收藏")+"：\n                            "),o("van-icon",{staticClass:"like-o",class:{like2:!t.isCollectionFlag},attrs:{name:t.isCollectionFlag?"like-o":"like"},on:{click:t.collection}})],1)],1)],1),o("van-cell-group",{staticClass:"goods-cell-group"},[o("van-cell",{attrs:{value:"进入店铺",icon:"shop","is-link":""}},[o("template",{slot:"title"},[o("span",{staticClass:"van-cell-text"},[t._v("有赞的店")]),o("van-tag",{staticClass:"goods-tag",attrs:{type:"danger"}},[t._v("官方")])],1)],2)],1),o("div",[o("van-tabs",{staticClass:"datails-tabs",model:{value:t.currentActive,callback:function(s){t.currentActive=s},expression:"currentActive"}},t._l(t.item,function(s){return o("van-tab",{key:s.id,attrs:{title:s.title}},[o("div",{directives:[{name:"show",rawName:"v-show",value:0==t.currentActive,expression:"currentActive == 0"}],staticClass:"active-0",domProps:{innerHTML:t._s(t.goodsDetails.detail||t.goods.detail)}}),o("div",{directives:[{name:"show",rawName:"v-show",value:1==t.currentActive,expression:"currentActive == 1"}],staticClass:"active-1"},[t._l(t.dataArr,function(s){return o("div",{key:s._id,staticClass:"comment"},[o("div",{staticClass:"comment-content"},[o("div",{staticClass:"avatar"},[s.anonymous?o("img",{attrs:{src:s.comment_avatar,alt:"",srcset:""}}):o("img",{attrs:{src:s.user[0].avatar,onerror:t.defaultImg,alt:"",srcset:""}})]),o("div",{staticClass:"desc border-bottom"},[o("p",{staticClass:"fist"},[s.anonymous?o("span",{staticClass:"name"},[t._v(t._s(s.comment_nickname)+"：")]):o("span",{staticClass:"name"},[t._v(t._s(s.user[0].nickname)+"：")]),o("span",{staticClass:"num"},[t._v(t._s(s.comment_time))])]),o("p",{staticClass:"timer"},[o("van-rate",{attrs:{readonly:"",size:12,color:"#e0322b"},model:{value:s.rate,callback:function(o){t.$set(s,"rate",o)},expression:"val.rate"}})],1),o("p",{staticClass:"cont"},[t._v(t._s(s.content))]),o("div",{staticClass:"img-content",class:t.setImgContentClass(s.images.length)},t._l(s.images,function(a){return o("img",{key:a,staticClass:"img",class:t.setImgClass(s.images.length),attrs:{src:a}})}),0)])])])}),t.dataArr.length?t._e():o("div",{staticClass:"nocomment"},[t._v("该商品暂无评论噢~~")])],2)])}),1)],1)],1)],1)]),o("transition",{attrs:{name:"bounce2"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showBase,expression:"showBase"}],staticClass:"sku",class:{sku2:t.showBase}},[o("van-icon",{staticClass:"close",attrs:{name:"close"},on:{click:function(s){t.showBase=!1}}}),o("div",{staticClass:"goods-top border-bottom"},[o("img",{staticClass:"image_path",attrs:{src:t.goods.image_path,onerror:t.defaultImg}}),o("div",{staticClass:"goods-right"},[o("p",{staticClass:"goods-name"},[t._v(t._s(t.goods.name))]),o("p",{staticClass:"pic"},[o("span",[t._v("￥")]),o("span",[t._v(t._s(t._f("toFixed")(t.goods.present_price*t.newCount)))])])])]),o("div",{staticClass:"goods-bottom border-bottom"},[o("div",{staticClass:"left"},[o("p",{staticClass:"num"},[t._v("购买数量：")]),o("p",{staticClass:"totle"},[t._v("\n                        剩余 "+t._s(t.goods.amount)+" 件\n                        "),o("span",[t._v("每人限购50件")])])]),o("AdditionAndSubtraction",{on:{count:t.count}})],1),o("div",{staticClass:"bottom",on:{click:t.PurchaseImmediately}},[t._v("立即购买")])],1)]),o("transition",{attrs:{name:"fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.showBase,expression:"showBase"}],staticClass:"sku-layer",on:{click:function(s){t.showBase=!1}}})]),o("van-goods-action",{staticClass:"van-goods-sku"},[o("van-goods-action-mini-btn",{attrs:{icon:"wap-home"},on:{click:t.goHome}},[t._v("首 页")]),o("van-goods-action-mini-btn",{attrs:{icon:"shopping-cart-o"},on:{click:t.onClickCart}},[t._v("购物车")]),o("van-goods-action-big-btn",{on:{click:t.addShops}},[t._v("加入购物车")]),o("van-goods-action-big-btn",{attrs:{primary:""},on:{click:t.purchase}},[t._v("立即购买")])],1),o("BaseLoding",{attrs:{showFlag:t.showFlag}}),o("Back",{on:{back:t.back}})],1)},e=[],i=o("9134"),n=o("1715"),c=o("3d93"),l=o("6ce7"),r=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"right"},[o("button",{staticClass:"van-stepper__minus add",class:{"van-stepper__minus--disabled":1==t.count},on:{click:t.minus}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"van-stepper__input",attrs:{type:"number",disabled:""},domProps:{value:t.count},on:{input:function(s){s.target.composing||(t.count=s.target.value)}}}),o("button",{staticClass:"van-stepper__plus",class:{"van-stepper__plus--disabled":15==t.count},on:{click:t.plus}})])},d=[],h={data(){return{count:1}},methods:{minus(){1!=this.count?this.count--:$toast("至少选择1件~~")},plus(){this.count>=50?$toast("最多选择50件噢~~"):this.count++}},watch:{count(t){this.$emit("count",t)}}},u=h,g=(o("c852"),o("25c1")),m=Object(g["a"])(u,r,d,!1,null,"1dfffdcf",null);m.options.__file="AdditionAndSubtraction.vue";var p=m.exports,v={name:"Details",props:["id"],mixins:[c["c"],c["b"],c["d"],c["e"]],components:{Back:n["a"],AdditionAndSubtraction:p,Scroll:i["a"]},data(){return{goods:{},defaultImg:'this.src="'+o("5307")+'"',currentActive:0,item:[{id:0,title:"商品详情"},{id:1,title:"商品评论"}],isCollectionFlag:!1,showBase:!1,newCount:1,comment:"",current:0,page:1,bounce:{bottom:!1}}},methods:{formatPrice(){return"¥"+(this.goods.price/100).toFixed(2)},onChange(t){this.current=t},onClickCart(){this.$router.push("/shoppingCart"),this.$router.go(-1)},goHome(){this.$router.push({path:"/home"})},setImgClass(t){return`img${t}`},setImgContentClass(t){return`img-content${t}`},async goodsItem(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.goodsDetails.goodsId,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{if(this.isLocked())return;this.locked();const a=await this.Api.goodOne(t,this.page),e=a.data;200==e.code&&(this.setTotal(e.goods.count),this.unLocked(),this.$refs.swiperImg.style.opacity=1,this.$refs.swiperImg2.style.opacity=1,e.goods.goodsOne&&(this.goods=e.goods.goodsOne,setTimeout(()=>{this.setBrowse(e.goods.goodsOne)},300)),s?this.setNewData(e.goods.comment):this.dataArr=e.goods.comment)}catch(o){this.showFlag=!1,this.isCollectionFlag=!0,this.unLocked(),this.$toast("网络错误")}},scrollToEnd(){setTimeout(()=>{this.$refs.scroll.refresh()},20),1==this.currentActive&&this.dataArr.length>=5&&(this.page++,this.hasMore()?this.goodsItem(this.id,!0):this.$toast("没有更多评论了~~"))},async isCollection(t){this.showFlag=!0;const s=await this.Api.isCollection(t),o=s.data;200==o.code?(this.showFlag=!1,1==o.isCollection?this.isCollectionFlag=!1:this.isCollectionFlag=!0):(this.showFlag=!1,this.isCollectionFlag=!0)},async collection(){if(this.userName)if(this.isCollectionFlag){let s=this.goods;delete s["_id"];try{const o=await this.Api.collection(s),a=o.data;200==a.code&&(this.$toast(a.msg),this.isCollectionFlag=!1)}catch(t){this.$toast("收藏失败,网络错误")}}else try{const s=await this.Api.cancelCollection(this.goods.id),o=s.data;200==o.code&&(this.isCollectionFlag=!0)}catch(t){this.$toast("网络错误")}else this.$router.push({path:"/login"})},async addShops(){if(this.userName)try{const s=await this.Api.addShop(this.goodsDetails.goodsId||this.goodsDetails.id),o=s.data;200==o.code&&this.$toast(o.msg)}catch(t){this.$toast("网络错误")}else this.$router.push({path:"/login"})},purchase(){this.showBase=!0},count(t){this.newCount=t},PurchaseImmediately(){if(!this.userName)return void this.$router.push({path:"/login"});let t=[{check:!0,count:this.newCount,cid:this.goods.id,image_path:this.goods.image_path,mallPrice:this.goods.present_price*this.newCount,present_price:this.goods.present_price,name:this.goods.name,idDirect:!0,count:this.newCount}];this.$router.push({path:"/ShoppingPayMent"}),this.setShopList(t)},showImagePreview(){Object(l["o"])({images:[this.goods.image,this.goods.image],startPosition:0,showIndicators:!0})}},created(){this.goodsItem(this.id),this.isCollection(this.goodsDetails.goodsId||this.goodsDetails.id||this.id)},mounted(){document.querySelector(".van-tabs__line").classList.add("swip"),this.$refs.swiperImg.style.opacity=0,this.$refs.swiperImg2.style.opacity=0},watch:{currentActive(t,s){1==t?(document.querySelector(".van-tabs__line").classList.remove("swip"),this.bounce.bottom=!0):this.bounce.bottom=!1}}},C=v,_=(o("a7a6"),Object(g["a"])(C,a,e,!1,null,"6817c231",null));_.options.__file="Details.vue";s["default"]=_.exports},a7a6:function(t,s,o){"use strict";var a=o("45b1"),e=o.n(a);e.a},c852:function(t,s,o){"use strict";var a=o("f438"),e=o.n(a);e.a},f438:function(t,s,o){}}]);