(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e9b3b4e"],{1715:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"icon",on:{click:t.back}},[i("van-icon",{staticClass:"arrow",attrs:{name:"arrow-left"}})],1)},a=[],o={methods:{back(){this.$emit("back")}}},r=o,n=(i("878e"),i("25c1")),c=Object(n["a"])(r,s,a,!1,null,"1280abbf",null);c.options.__file="Back.vue";e["a"]=c.exports},4424:function(t,e,i){t.exports=i.p+"img/login.4e54e532.jpg"},"49a2":function(t,e,i){},"6e66":function(t,e,i){},"878e":function(t,e,i){"use strict";var s=i("6e66"),a=i.n(s);a.a},"9ed1":function(t,e,i){"use strict";var s=i("49a2"),a=i.n(s);a.a},a55b:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{staticClass:"login-warpper"},[s("img",{staticClass:"login-img",attrs:{src:i("4424"),alt:"",srcset:""}}),s("div",{staticClass:"form"},[s("div",{staticClass:"form-cont"},[s("p",{staticClass:"login-title"},[t._v("登录 / 注册")]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"sr-only",attrs:{for:"username"}},[t._v("USERNAME")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.nickname,expression:"nickname"}],staticClass:"form-control",attrs:{type:"text",maxlength:"16",placeholder:"USERNAME",autocomplete:"off"},domProps:{value:t.nickname},on:{input:function(e){e.target.composing||(t.nickname=e.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"sr-only",attrs:{for:"password"}},[t._v("PASSWORD")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",maxlength:"16",placeholder:"PASSWORD",autocomplete:"off"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("div",{staticClass:"form-group verify"},[s("label",{staticClass:"col-sm-2 control-label",attrs:{for:"inputEmail3"}},[t._v("验证码：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.verifyTxt,expression:"verifyTxt"}],staticClass:"form-control verify-input",attrs:{type:"text",placeholder:"请输入验证码",maxlength:"4",autocomplete:"off"},domProps:{value:t.verifyTxt},on:{input:function(e){e.target.composing||(t.verifyTxt=e.target.value)}}}),s("div",{staticClass:"col-sm-10"},[s("img",{ref:"eleVerify",attrs:{src:t.verify,title:"看不清？点击刷新"},on:{click:t.replaceVerify}})])]),s("div",{staticClass:"form-group form-group2"},[s("van-button",{staticStyle:{"margin-right":"10px"},attrs:{loading:t.loginLoding,type:"primary"},on:{click:function(e){t.login(!1)}}},[t._v("登 录")]),s("van-button",{attrs:{loading:t.regLoding,type:"danger"},on:{click:function(e){t.login(!0)}}},[t._v("注 册")])],1)])]),s("Back",{on:{back:t.back}})],1)])},a=[],o=i("1715"),r=i("3d93"),n={mixins:[r["b"],r["e"]],data(){return{nickname:"",password:"",tip:"",timer:0,regLoding:!1,loginLoding:!1,verify:this.Api.getAverify(),verifyTxt:""}},components:{Back:o["a"]},methods:{async replaceVerify(){this.$refs.eleVerify["src"]=`/v1/verify?mt=${Math.random()}`},login(t){this.nickname&&this.password?this.verifyTxt?t?this.register(!0):this.register(!1):this.$toast("请输入验证码"):this.$toast("请输入用户名或者密码")},async register(t){if(t)try{this.regLoding=!0;const t=await this.Api.register(this.nickname,this.password,this.verifyTxt),i=t.data;200==i.code?(this.setName(i.userInfo),setTimeout(()=>{this.$router.go(-1)},1500)):-2==i.code&&setTimeout(()=>{this.replaceVerify()},600),this.regLoding=!1,this.$toast(i.msg)}catch(e){this.$toast("网络错误"),this.regLoding=!1}else try{this.loginLoding=!0;const t=await this.Api.login(this.nickname,this.password,this.verifyTxt),i=t.data;200==i.code?(this.setName(i.userInfo),setTimeout(()=>{this.$router.go(-1)},1500)):-2==i.code&&setTimeout(()=>{this.replaceVerify()},600),this.loginLoding=!1,this.$toast(i.msg)}catch(e){this.$toast("网络错误"),this.loginLoding=!1}}},beforeRouteEnter(t,e,i){i(async t=>{try{const i=await t.Api.keeplogin(),s=i.data;200==s.code&&t.$router.push({path:"/"})}catch(e){t.$toast("网络错误")}})}},c=n,l=(i("9ed1"),i("25c1")),p=Object(l["a"])(c,s,a,!1,null,"460f8fdc",null);p.options.__file="Login.vue";e["default"]=p.exports}}]);