(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c13d4232"],{1715:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"icon",on:{click:t.back}},[e("van-icon",{staticClass:"arrow",attrs:{name:"arrow-left"}})],1)},o=[],i={methods:{back:function(){this.$emit("back")}}},n=i,c=(e("878e"),e("25c1")),r=Object(c["a"])(n,a,o,!1,null,"1280abbf",null);r.options.__file="Back.vue";s["a"]=r.exports},"45b1":function(t,s,e){},5307:function(t,s,e){t.exports=e.p+"img/vue.63050d8a.jpg"},"6e66":function(t,s,e){},"878e":function(t,s,e){"use strict";var a=e("6e66"),o=e.n(a);o.a},"9f52":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods"},[e("Scroll",{ref:"scroll",staticClass:"scroll",attrs:{bounce:t.bounce,pullup:!0},on:{scrollToEnd:t.scrollToEnd}},[e("div",[e("van-swipe",{staticClass:"goods-swipe",attrs:{autoplay:3e3,touchable:!1},on:{change:t.onChange}},[e("van-swipe-item",[e("img",{ref:"swiperImg",attrs:{src:t.goods.image,onerror:t.defaultImg},on:{click:t.showImagePreview}})]),e("van-swipe-item",[e("img",{ref:"swiperImg2",attrs:{src:t.goods.image,onerror:t.defaultImg},on:{click:t.showImagePreview}})]),e("div",{staticClass:"custom-indicator",attrs:{slot:"indicator"},slot:"indicator"},[t._v(t._s(t.current+1)+"/2")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.showFlag,expression:"!showFlag"}]},[e("van-cell-group",[e("van-cell",[e("div",{staticClass:"goods-title"},[t._v(t._s(t.goods.name))]),e("div",{staticClass:"goods-price"},[t._v("￥"+t._s(t.goods.present_price))])]),e("van-cell",{staticClass:"goods-express"},[e("van-col",{attrs:{span:"9"}},[t._v("运费："+t._s(t.goods.express||0))]),e("van-col",{attrs:{span:"9"}},[t._v("剩余："+t._s(t.goods.amount))]),e("van-col",{staticClass:"like",attrs:{span:"6"}},[t._v("\n                            "+t._s(t.isCollectionFlag?"收藏":"取消收藏")+"：\n                            "),e("van-icon",{staticClass:"like-o",class:{like2:!t.isCollectionFlag},attrs:{name:t.isCollectionFlag?"like-o":"like"},on:{click:t.collection}})],1)],1)],1),e("van-cell-group",{staticClass:"goods-cell-group"},[e("van-cell",{attrs:{value:"进入店铺",icon:"shop","is-link":""}},[e("template",{slot:"title"},[e("span",{staticClass:"van-cell-text"},[t._v("有赞的店")]),e("van-tag",{staticClass:"goods-tag",attrs:{type:"danger"}},[t._v("官方")])],1)],2)],1),e("div",[e("van-tabs",{staticClass:"datails-tabs",model:{value:t.currentActive,callback:function(s){t.currentActive=s},expression:"currentActive"}},t._l(t.item,function(s){return e("van-tab",{key:s.id,attrs:{title:s.title}},[e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.currentActive,expression:"currentActive == 0"}],staticClass:"active-0",domProps:{innerHTML:t._s(t.goodsDetails.detail||t.goods.detail)}}),e("div",{directives:[{name:"show",rawName:"v-show",value:1==t.currentActive,expression:"currentActive == 1"}],staticClass:"active-1"},[t._l(t.dataArr,function(s){return e("div",{key:s._id,staticClass:"comment"},[e("div",{staticClass:"comment-content"},[e("div",{staticClass:"avatar"},[s.anonymous?e("img",{attrs:{src:s.comment_avatar,alt:"",srcset:""}}):e("img",{attrs:{src:s.user[0].avatar,onerror:t.defaultImg,alt:"",srcset:""}})]),e("div",{staticClass:"desc border-bottom"},[e("p",{staticClass:"fist"},[s.anonymous?e("span",{staticClass:"name"},[t._v(t._s(s.comment_nickname)+"：")]):e("span",{staticClass:"name"},[t._v(t._s(s.user[0].nickname)+"：")]),e("span",{staticClass:"num"},[t._v(t._s(s.comment_time))])]),e("p",{staticClass:"timer"},[e("van-rate",{attrs:{readonly:"",size:12,color:"#e0322b"},model:{value:s.rate,callback:function(e){t.$set(s,"rate",e)},expression:"val.rate"}})],1),e("p",{staticClass:"cont"},[t._v(t._s(s.content))]),e("div",{staticClass:"img-content",class:t.setImgContentClass(s.images.length)},t._l(s.images,function(a){return e("img",{key:a,staticClass:"img",class:t.setImgClass(s.images.length),attrs:{src:a}})}),0)])])])}),t.dataArr.length?t._e():e("div",{staticClass:"nocomment"},[t._v("该商品暂无评论噢~~")])],2)])}),1)],1)],1)],1)]),e("transition",{attrs:{name:"bounce2"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showBase,expression:"showBase"}],staticClass:"sku",class:{sku2:t.showBase}},[e("van-icon",{staticClass:"close",attrs:{name:"close"},on:{click:function(s){t.showBase=!1}}}),e("div",{staticClass:"goods-top border-bottom"},[e("img",{staticClass:"image_path",attrs:{src:t.goods.image_path,onerror:t.defaultImg}}),e("div",{staticClass:"goods-right"},[e("p",{staticClass:"goods-name"},[t._v(t._s(t.goods.name))]),e("p",{staticClass:"pic"},[e("span",[t._v("￥")]),e("span",[t._v(t._s(t._f("toFixed")(t.goods.present_price*t.newCount)))])])])]),e("div",{staticClass:"goods-bottom border-bottom"},[e("div",{staticClass:"left"},[e("p",{staticClass:"num"},[t._v("购买数量：")]),e("p",{staticClass:"totle"},[t._v("\n                        剩余 "+t._s(t.goods.amount)+" 件\n                        "),e("span",[t._v("每人限购50件")])])]),e("AdditionAndSubtraction",{on:{count:t.count}})],1),e("div",{staticClass:"bottom",on:{click:t.PurchaseImmediately}},[t._v("立即购买")])],1)]),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.showBase,expression:"showBase"}],staticClass:"sku-layer",on:{click:function(s){t.showBase=!1}}})]),e("van-goods-action",{staticClass:"van-goods-sku"},[e("van-goods-action-mini-btn",{attrs:{icon:"wap-home"},on:{click:t.goHome}},[t._v("首 页")]),e("van-goods-action-mini-btn",{attrs:{icon:"shopping-cart-o"},on:{click:t.onClickCart}},[t._v("购物车")]),e("van-goods-action-big-btn",{on:{click:t.addShops}},[t._v("加入购物车")]),e("van-goods-action-big-btn",{attrs:{primary:""},on:{click:t.purchase}},[t._v("立即购买")])],1),e("BaseLoding",{attrs:{showFlag:t.showFlag}}),e("Back",{on:{back:t.back}})],1)},o=[],i=e("f44b"),n=(e("d85c"),e("b5aa"),e("b8fa")),c=e("9134"),r=e("1715"),l=e("3d93"),u=e("6ce7"),d=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"right"},[e("button",{staticClass:"van-stepper__minus add",class:{"van-stepper__minus--disabled":1==t.count},on:{click:t.minus}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"van-stepper__input",attrs:{type:"number",disabled:""},domProps:{value:t.count},on:{input:function(s){s.target.composing||(t.count=s.target.value)}}}),e("button",{staticClass:"van-stepper__plus",class:{"van-stepper__plus--disabled":15==t.count},on:{click:t.plus}})])},h=[],p={data:function(){return{count:1}},methods:{minus:function(){1!=this.count?this.count--:$toast("至少选择1件~~")},plus:function(){this.count>=50?$toast("最多选择50件噢~~"):this.count++}},watch:{count:function(t){this.$emit("count",t)}}},m=p,g=(e("c852"),e("25c1")),v=Object(g["a"])(m,d,h,!1,null,"1dfffdcf",null);v.options.__file="AdditionAndSubtraction.vue";var f=v.exports,w={name:"Details",props:["id"],mixins:[l["c"],l["b"],l["d"],l["e"]],components:{Back:r["a"],AdditionAndSubtraction:f,Scroll:c["a"]},data:function(){return{goods:{},defaultImg:'this.src="'+e("5307")+'"',currentActive:0,item:[{id:0,title:"商品详情"},{id:1,title:"商品评论"}],isCollectionFlag:!1,showBase:!1,newCount:1,comment:"",current:0,page:1,bounce:{bottom:!1}}},methods:{formatPrice:function(){return"¥"+(this.goods.price/100).toFixed(2)},onChange:function(t){this.current=t},onClickCart:function(){this.$router.push("/shoppingCart"),this.$router.go(-1)},goHome:function(){this.$router.push({path:"/home"})},setImgClass:function(t){return"img".concat(t)},setImgContentClass:function(t){return"img-content".concat(t)},goodsItem:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var s,e,a,o,i=this,n=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(s=n.length>0&&void 0!==n[0]?n[0]:this.goodsDetails.goodsId,e=n.length>1&&void 0!==n[1]&&n[1],t.prev=2,!this.isLocked()){t.next=5;break}return t.abrupt("return");case 5:return this.locked(),t.next=8,this.Api.goodOne(s,this.page);case 8:a=t.sent,o=a.data,200==o.code&&(this.setTotal(o.goods.count),this.unLocked(),this.$refs.swiperImg.style.opacity=1,this.$refs.swiperImg2.style.opacity=1,o.goods.goodsOne&&(this.goods=o.goods.goodsOne,setTimeout(function(){i.setBrowse(o.goods.goodsOne)},300)),e?this.setNewData(o.goods.comment):this.dataArr=o.goods.comment),t.next=19;break;case 13:t.prev=13,t.t0=t["catch"](2),this.showFlag=!1,this.isCollectionFlag=!0,this.unLocked(),this.$toast("网络错误");case 19:case"end":return t.stop()}},t,this,[[2,13]])}));function s(){return t.apply(this,arguments)}return s}(),scrollToEnd:function(){var t=this;setTimeout(function(){t.$refs.scroll.refresh()},20),1==this.currentActive&&this.dataArr.length>=5&&(this.page++,this.hasMore()?this.goodsItem(this.id,!0):this.$toast("没有更多评论了~~"))},isCollection:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(s){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.showFlag=!0,t.next=3,this.Api.isCollection(s);case 3:e=t.sent,a=e.data,200==a.code?(this.showFlag=!1,1==a.isCollection?this.isCollectionFlag=!1:this.isCollectionFlag=!0):(this.showFlag=!1,this.isCollectionFlag=!0);case 6:case"end":return t.stop()}},t,this)}));function s(s){return t.apply(this,arguments)}return s}(),collection:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var s,e,a,o,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.userName){t.next=3;break}return this.$router.push({path:"/login"}),t.abrupt("return");case 3:if(!this.isCollectionFlag){t.next=19;break}return s=this.goods,delete s["_id"],t.prev=6,t.next=9,this.Api.collection(s);case 9:e=t.sent,a=e.data,200==a.code&&(this.$toast(a.msg),this.isCollectionFlag=!1),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](6),this.$toast("收藏失败,网络错误");case 17:t.next=30;break;case 19:return t.prev=19,t.next=22,this.Api.cancelCollection(this.goods.id);case 22:o=t.sent,i=o.data,200==i.code&&(this.isCollectionFlag=!0),t.next=30;break;case 27:t.prev=27,t.t1=t["catch"](19),this.$toast("网络错误");case 30:case"end":return t.stop()}},t,this,[[6,14],[19,27]])}));function s(){return t.apply(this,arguments)}return s}(),addShops:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var s,e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.userName){t.next=3;break}return this.$router.push({path:"/login"}),t.abrupt("return");case 3:return t.prev=3,t.next=6,this.Api.addShop(this.goodsDetails.goodsId||this.goodsDetails.id);case 6:s=t.sent,e=s.data,200==e.code&&this.$toast(e.msg),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](3),this.$toast("网络错误");case 14:case"end":return t.stop()}},t,this,[[3,11]])}));function s(){return t.apply(this,arguments)}return s}(),purchase:function(){this.showBase=!0},count:function(t){this.newCount=t},PurchaseImmediately:function(){if(this.userName){var t=[Object(i["a"])({check:!0,count:this.newCount,cid:this.goods.id,image_path:this.goods.image_path,mallPrice:this.goods.present_price*this.newCount,present_price:this.goods.present_price,name:this.goods.name,idDirect:!0},"count",this.newCount)];this.$router.push({path:"/ShoppingPayMent"}),this.setShopList(t)}else this.$router.push({path:"/login"})},showImagePreview:function(){Object(u["o"])({images:[this.goods.image,this.goods.image],startPosition:0,showIndicators:!0})}},created:function(){this.goodsItem(this.id),this.isCollection(this.goodsDetails.goodsId||this.goodsDetails.id||this.id)},mounted:function(){document.querySelector(".van-tabs__line").classList.add("swip"),this.$refs.swiperImg.style.opacity=0,this.$refs.swiperImg2.style.opacity=0},watch:{currentActive:function(t,s){1==t?(document.querySelector(".van-tabs__line").classList.remove("swip"),this.bounce.bottom=!0):this.bounce.bottom=!1}}},C=w,_=(e("a7a6"),Object(g["a"])(C,a,o,!1,null,"6817c231",null));_.options.__file="Details.vue";s["default"]=_.exports},a7a6:function(t,s,e){"use strict";var a=e("45b1"),o=e.n(a);o.a},c852:function(t,s,e){"use strict";var a=e("f438"),o=e.n(a);o.a},f438:function(t,s,e){}}]);